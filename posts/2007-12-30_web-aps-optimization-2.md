title: Оптимизация работы веб-приложений: файловая система
link: http://paradigm.ru/web-aps-optimization-2
creator: admin
description:
post_id: 149
created: 2007/12/30 00:00:59
created_gmt: 2007/12/29 21:00:59
comment_status: open
post_name: web-aps-optimization-2
status: publish
post_type: post

# Оптимизация работы веб-приложений: файловая система

Продолжаем тему оптимизации работы веб-приложений. В данном разделе будут рассмотрены методы решения этой задачи в контексте первого из перечисленных в [предыдущей части](/media/web-aps-optimization/) факторов. Речь пойдет о файловой системе.

Существует множество способов для того, чтобы повысить скорость выполнения файловых операций. Большинство из тех, которые будут описаны ниже, относятся к категории экстенсивных методов, т.е. основанных на внешних по отношению к веб-приложению средствах. В частности это относится к выбору железа и типа файловой системы, что актуально для систем, работающих на выделенных серверах.

Помимо этого так же будут рассмотрены общие подходы повышения эффективности работы веб-приложений, основанные на оптимизации их кода.

### Выбор жестких дисков

В настоящее время распространены четыре основных разновидности HDD: IDE, SATA, SCSI и SAS (Serial Attached SCSI). Учитывая, что IDE уходят с рынка, и все идет к тому, что SAS постепенно заменит SCSI, выбор можно локализовать до двух вариантов — между SATA и SAS. Делать этот выбор стоит опираясь только на масштабы задачи, т.к. жесткие диски этих типов, строго говоря, не являются конкурентами из-за совершенно разного позиционирования.

![](/media/01wd4000kd-pers.jpg)В качестве примера из жизни, можно привести тот факт, что на недорогие веб-серверы, которые можно арендовать за ~100$ в месяц, обычно ставят SATA. VPS/VDS хостинги тоже зачастую используют именно такие HDD. О той производительности, которую от них можно получить лучше всего основываясь именно на подобных конкретных внедрениях, тем более, что аппаратная конфигурация серверной площадки у большинства провайдеров не является тайной. Только после выполнения такого анализа можно выдать решение, достатона ли производительность SATA или стоит переплатить за SAS.

Существует так же промежуточное решение в виде винчестеров с SATA интерфейсом и повышенной производительностью. Например, [WD Raptor](http://b23.ru/c6r) с 10,000 rpm работает существенно быстрее обычных SATA дисков, но стоит при этом заметно дешевле SAS.

### RAID

Для повышения производительности жестких дисков, их можно объединять в RAID массивы уровня 0 или 0+1 (другие распространенные уровни RAID предназначены только для повышения надежности хранения данных). Увеличение скорости обмена данными с HDD в обоих случаях основано на том, что чтение и запись происходит параллельно на два накопителя. Но в случае с RAID 0+1, дополнительно выполняется так же постоянное дублирование данных, для обеспечения безопасности от сбоев («зеркалирование»).

Для того, чтобы собрать массив RAID 0, понадобится как минимум два винчестера, а для RAID 0+1 — четыре (фактически это два массива RAID 0 — основной и дублирующий). На практике уровень RAID 0 крайне не рекомендуют использовать (в особенности на серверах) из-за отсутствия у него какой-либо отказоустойчивости. Дело даже не в том, что при «смерти» одного из жестких дисков данные со всего массива будут полностью утеряны, а в том, что при работе RAID 0 иногда случаются сбои, после которых какая-то часть данных может быт повреждена. Особенно это касается недорогих RAID контроллеров. Кроме того, массив RAID 0 менее удобен в обслуживании. Заменить жесткий диск в нем — не такая тривиальная операция, как может показаться.

Поэтому, если жестких бюджетных ограничений нет, гораздо лучше использовать массив RAID 0+1 из четырех HDD. Но если финансы не позволяют установить более двух винчестеров, все равно не стоит гнаться за скорость в ущерб надежности. Вместо RAID 0 лучше объединить их в RAID 1 (зеркальный дисковый массив), либо просто использовать по-отдельности.

## Comments

**[LitoX](#168 "2008/01/06 01:58:37"):** замечательно ))

