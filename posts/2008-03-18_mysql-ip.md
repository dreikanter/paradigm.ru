title: Хранение IP в таблице MySQL
link: http://paradigm.ru/mysql-ip
creator: admin
description: 
post_id: 226
created: 2008/03/18 05:36:41
created_gmt: 2008/03/18 12:36:41
comment_status: open
post_name: mysql-ip
status: publish
post_type: post

# Хранение IP в таблице MySQL

Иногда полезная информация попадается на глаза тогда, когда необходимость в ней уже или еще отсутствует. Например, я только что нашел на сайте MyMans.org [описание функций](http://mymans.org/2008/03/18/431), с помощью которых в базе MySQL можно удобно хранить IP адреса, используя поле типа `INT`. Абсолютно правильная, кстати, идея — это гораздо эффективнее с точки зрения системных ресурсов, чем отводить текстовое поле (встречавшееся решение).

Пример кода:
    
    SELECT INET_ATON('127.0.0.1'), INET_ATON('127.1');
    -- 2130706433, 2130706433
    
    SELECT INET_NTOA(3520061480);
    -- '209.207.224.40'
    
    SELECT * FROM Sessions WHERE ip_address
    BETWEEN INET_ATON('192.168.0.1') AND INET_ATON('192.168.0.255');

От себя могу добавить, что эти функции появились начиная с версии 3.23.15, поэтому их использование никак не ухудшит переносимость скриптов.

Кстати, очень рекомендую [MyMans](http://mymans.org/) всем, кто его еще не видел. Весьма полезный коллективный блог по вебдеву.

## Comments

**[va1en0k](#405 "2008/03/18 06:28:20"):** а новые ипы поддерживает?

**[admin](#406 "2008/03/18 06:50:39"):** va1en0k: В документации сказано «Addresses may be 4- or 8-byte addresses». Это значит, IP6 поддерживается. Сам пока не проверял.

**[Юрий](#51993 "2011/03/10 11:58:09"):** Кстати для справки нужно использовать UNSIGNED INT, на некоторых IP в противном случае глючить будет. Сам попался на такое:)

**[DLEVOODOO](#53727 "2011/04/15 01:37:32"):** Спасибо за статью[!](http://etenclub.ru)

